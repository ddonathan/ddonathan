<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barbell Warm-up Set Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Barbell Warm-up Set Calculator</h1>
    <div id="errorContainer" class="error"></div>
    <div class="form-group">
        <label for="liftSelect1">Lift 1:</label>
        <select id="liftSelect1">
            <option value="">(Select Lift)</option>
        </select>
        <input type="number" id="targetWeight1" min="45" step="0.25" placeholder="Target Weight">
    </div>
    <div class="form-group">
        <label for="liftSelect2">Lift 2:</label>
        <select id="liftSelect2">
            <option value="">(Select Lift)</option>
        </select>
        <input type="number" id="targetWeight2" min="45" step="0.25" placeholder="Target Weight">
    </div>
    <button onclick="window.print()">Print</button>
    <br>
    <button onclick="toggleTextarea('config')">Show Config</button>
    <div id="configContainer" class="textarea-container">
        <label for="configTextarea">Config JSON:</label>
        <textarea id="configTextarea" rows="10"></textarea>
        <select id="configTemplateSelect" onchange="loadConfig()">
            <option value="standard">Standard</option>
            <option value="custom">Custom</option>
        </select>
    </div>
    <br>
    <button onclick="toggleTextarea('inventory')">Show Inventory</button>
    <div id="inventoryContainer" class="textarea-container">
        <label for="inventoryTextarea">Inventory JSON:</label>
        <textarea id="inventoryTextarea" rows="10"></textarea>
        <select id="inventoryTemplateSelect" onchange="loadInventoryTemplate()">
            <option value="basic">Basic</option>
            <option value="intermediate">Intermediate</option>
            <option value="advanced">Advanced</option>
            <option value="custom">Custom</option>
        </select>
    </div>
    <br>
    <button onclick="calculateWarmupSets()">Recalculate</button>
    <button onclick="resetToDefaults()">Reset to Defaults</button>

    <div id="printableArea">
        <div class="table-container">
            <div id="lift1Container" class="hidden no-page-break">
                <h2 id="liftName1">Warm-up Sets for Lift 1</h2>
                <table>
                    <thead id="warmupHeader1">
                        <tr>
                            <th>Weight</th>
                        </tr>
                    </thead>
                    <tbody id="warmupTable1">
                    </tbody>
                    <tfoot id="warmupFooter1">
                    </tfoot>
                </table>
            </div>
        </div>

        <div class="table-container">
            <div id="lift2Container" class="hidden no-page-break">
                <h2 id="liftName2">Warm-up Sets for Lift 2</h2>
                <table>
                    <thead id="warmupHeader2">
                        <tr>
                            <th>Weight</th>
                        </tr>
                    </thead>
                    <tbody id="warmupTable2">
                    </tbody>
                    <tfoot id="warmupFooter2">
                    </tfoot>
                </table>
            </div>
        </div>
    </div>

    <footer id="printFooter">
        <div class="footer-left" id="footerText"></div>
        <div class="footer-right" id="printDateTime"></div>
    </footer>

    <script src="js/config.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Function to set the current date and time in the footer
        function setPrintDateTime() {
            const now = new Date();
            const dateTimeString = now.toLocaleString();
            document.getElementById('printDateTime').textContent = dateTimeString;
        }

        // Function to set the footer text based on the config value
        function setFooterText(footerText) {
            const footerTextElement = document.getElementById('footerText');
            footerTextElement.textContent = footerText || '';
        }

        // Load the configuration from config.json
        fetch('config.json')
            .then(response => response.json())
            .then(config => {
                setFooterText(config.footerText);
                if (config.showFooter) {
                    setPrintDateTime();
                }
            })
            .catch(error => console.error('Error loading config:', error));
    </script>
</body>
</html>